(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/detail/detail"],{"37c1":function(o,t,n){"use strict";var c;n.d(t,"b",(function(){return e})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return c}));var e=function(){var o=this,t=o.$createElement,n=(o._self._c,o.product.price?o.product.price.toFixed(1):null),c=o._f("currency")(o.cartTotalPrice);o.$mp.data=Object.assign({},{$root:{g0:n,f0:c}})},r=[]},"6deb":function(o,t,n){},b321:function(o,t,n){"use strict";n.r(t);var c=n("f5bc"),e=n.n(c);for(var r in c)"default"!==r&&function(o){n.d(t,o,(function(){return c[o]}))}(r);t["default"]=e.a},b59f:function(o,t,n){"use strict";n.r(t);var c=n("37c1"),e=n("b321");for(var r in e)"default"!==r&&function(o){n.d(t,o,(function(){return e[o]}))}(r);n("f2a2");var a,l=n("f0c5"),i=Object(l["a"])(e["default"],c["b"],c["c"],!1,null,null,null,!1,c["a"],a);t["default"]=i.exports},c46f:function(o,t,n){"use strict";(function(o){n("8a18");c(n("66fd"));var t=c(n("b59f"));function c(o){return o&&o.__esModule?o:{default:o}}o(t.default)}).call(this,n("543d")["createPage"])},f2a2:function(o,t,n){"use strict";var c=n("6deb"),e=n.n(c);e.a},f5bc:function(o,t,n){"use strict";(function(o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{product:{},cartTotalNum:0,cartTotalPrice:0,proTotalNum:0,pro_id:0}},methods:{addCart:function(){var t=this.product;console.log(t),o.getStorage({key:"my_cart",fail:function(n){console.log("购物车不存在",n);var c={pro_list:[],totalNum:0,totalPrice:0};t.num=1,console.log(t),c.pro_list.push(t),console.log(c),c.totalNum=t.num,c.totalPrice=t.price,o.setStorage({key:"my_cart",data:c,success:function(o){console.log("1-success:",o)},fail:function(o){console.log("1-fail:",o)}})},success:function(n){console.log("购物车存在，获取成功!",n);var c=n.data;console.log(c);for(var e=c.pro_list,r=!1,a=0;a<e.length;a++)if(console.log(e[a]),t.id==e[a].id){r=!0;break}if(console.log("产品是否存在:",r),r){console.log("修改前：",c);for(var l=0;l<e.length;l++)if(t.id==e[l].id){e[l].num=e[l].num+1;break}c.pro_list=e}else t.num=1,e.push(t),c.pro_list=e;console.log("保存前的数据:",c);for(var i=c.pro_list,u=0,s=0,f=0;f<i.length;f++)console.log(i[f]),u+=i[f].num,s+=i[f].num*i[f].price;console.log("总数是："+u),console.log("总价是："+s),c.totalNum=u,c.totalPrice=s,o.setStorage({key:"my_cart",data:c,success:function(o){console.log("更新购物车完成！",o)}})}}),this.getCartInfo()},getCartInfo:function(){console.log("获取购物车的信息");var t=this;o.getStorage({key:"my_cart",success:function(o){console.log("购物车————>",o);var n=o.data;t.cartTotalNum=n.totalNum,t.cartTotalPrice=n.totalPrice;var c=n.pro_list;console.log(t.pro_id,c);for(var e=0,r=0;r<c.length;r++)c[r].id==t.pro_id&&(e=c[r]);t.proTotalNum=e?e.num:0}})}},onShow:function(){this.getCartInfo()},filters:{currency:function(o){return"￥"+o.toFixed(1)}},onLoad:function(t){var n=this;console.log(t,t.id),this.pro_id=t.id,t.id||o.navigateTo({url:"../list/list"}),o.request({url:"http://api.brqc.com.cn/detail.php/"+t.id,data:{},method:"get",success:function(o){console.log("success:",o);var t=o.data;n.product=t.data},fail:function(o){console.log("success:",o)}})}};t.default=n}).call(this,n("543d")["default"])}},[["c46f","common/runtime","common/vendor"]]]);